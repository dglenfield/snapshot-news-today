CREATE TABLE IF NOT EXISTS scrape_job (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    snapshot_job_id INTEGER NOT NULL,
    source TEXT NOT NULL,
    started_on TEXT NOT NULL,
    finished_on TEXT,
    run_time_in_seconds INTEGER,
    sections_scraped INTEGER,
    headlines_scraped INTEGER,
    articles_scraped INTEGER,
    is_success INTEGER,
    error_message TEXT,
    main_page_errors TEXT,
    articles_errors TEXT,
    FOREIGN KEY(snapshot_job_id) REFERENCES snapshot_job(id) ON DELETE CASCADE);

INSERT INTO database_info (entity, version) 
    VALUES ('scrape_job', '1.1');
